{"version":3,"sources":["main.js"],"names":["document","addEventListener","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","firebase","initializeApp","db","firestore","auth","form","querySelector","input","btn","ul","login","logout","collection","signInAnonymously","signOut","e","preventDefault","value","trim","add","message","created_at","FieldValue","serverTimestamp","then","doc","console","log","id","focus","catch","error","onAuthStateChanged","user","orderBy","onSnapshot","snapshot","docChanges","forEach","change","type","li","createElement","textContent","data","appendChild","uid"],"mappings":"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","file":"main.1f19ae8e.map","sourceRoot":"../src","sourcesContent":["\ndocument.addEventListener('DOMContentLoaded', () => {\n'use strict';\n\n  var config = {\n    apiKey: \"AIzaSyCbwkLe6ZFPLMxAoT7iNjSKEFf6hsCuXZA\",\n    authDomain: \"test-store-b68ee.firebaseapp.com\",\n    databaseURL: \"https://test-store-b68ee.firebaseio.com\",\n    projectId: \"test-store-b68ee\",\n    storageBucket: \"test-store-b68ee.appspot.com\",\n    messagingSenderId: \"184450022187\"\n  };\n  firebase.initializeApp(config);\n\n  const db = firebase.firestore()\n  const auth = firebase.auth()\n  // const settings = { timestampsInSnapshots: true }\n  // db.settings(settings)\n  const form = document.querySelector('#form')\n  const input = document.querySelector('#input')\n  const btn = document.querySelector('#btn') \n  const ul = document.querySelector('#ul');\n  const login = document.querySelector('#login');\n  const logout = document.querySelector('#logout');\n\n  const collection = db.collection('atom')\n\n  login.addEventListener('click', () => {\n    auth.signInAnonymously()\n  })\n  logout.addEventListener('click', () => {\n    auth.signOut();\n  })\n\n  form.addEventListener('submit', e => {\n    e.preventDefault();\n    const value = input.value.trim()\n    if (value === \"\") return\n    \n    // ダイレクト記載分\n    // let li = document.createElement('li')\n    // li.textContent = value\n    // ul.appendChild(li)\n\n    collection.add({\n      message: input.value,\n      created_at: firebase.firestore.FieldValue.serverTimestamp()\n    })\n    .then(doc=> {\n      console.log(`${doc.id}`);\n      input.value = ''\n      input.focus()\n    })\n    .catch(error => {\n      console.error(error)\n    })\n    input.focus()\n  })\n\n  auth.onAuthStateChanged(user => {\n    if (user) {\n      collection.orderBy('created_at', 'desc')\n        .onSnapshot( snapshot => {\n          snapshot.docChanges().forEach( change => {\n            if (change.type === 'added') {\n              let li = document.createElement('li')\n              li.textContent = `data: ${change.doc.data().message} `\n              ul.appendChild(li)\n            }\n          })\n        })\n      console.log(`uid: ${user.uid}`)\n      return\n    }\n    console.log('Nobody is login')\n  })\n\n})\n  "]}